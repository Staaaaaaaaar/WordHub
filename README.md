# WordHub - 简洁高效的英语词汇学习软件

**北京大学2025程序设计实习第120组大作业**

WordHub 旨在通过现代化的交互界面、科学的记忆方法和趣味性的游戏模块，为用户提供一个高效、沉浸式的单词学习环境。本项目不仅实现了完整的单词学习闭环，还包含了用户系统、成就激励、数据可视化和 AI 互动游戏等多种功能。

---

## 🎬 功能演示

*(建议在此处插入一段 GIF 动图或视频链接，展示软件的核心操作流程)*

![功能演示](https://example.com/demo.gif)

## ✨ 1. 程序功能介绍 (核心功能)

*   **科学学习系统**:
    *   **学习模式**: 智能推荐新单词进行学习。
    *   **复习模式**: 基于艾宾浩斯遗忘曲线，自动筛选需要复习的单词。
    *   **测试模式**: 通过选择题检验学习成果，巩固记忆。

*   **强大的词库管理**:
    *   支持从本地 `TXT` 文件导入自定义词库，格式兼容性强，并可通过在线词典 API 自动补全详细释义。（可见[`词库导入样例.txt`](杂项/词库导入样例.txt)）
    *   内置常见的英语词库（如 CET4、CET6、GRE 等）。
    *   支持创建多个词库，并可在不同词库间自由切换。

*   **快速信息索引**:
    *   提供强大的单词查询功能，可快速检索本地词库或通过在线 API 获取更详细的实时词汇信息。

*   **数据可视化**:
    *   通过热力图、折线图、柱状图等多种图表，直观展示用户的学习总览、每日学习量、正确率变化等。
    *   清晰追踪每一个单词的复习次数、掌握程度和最后复习时间。

*   **游戏化学习**:
    *   内置经典的 **Wordle** 猜词游戏，寓教于乐。
    *   集成基于 **DeepSeek** 的“看描述猜单词”游戏，提供全新的 AI 互动学习体验。

*   **完善的用户与成就系统**:
    *   支持用户注册与登录，所有学习数据云端同步（模拟）。
    *   独特的**成就系统**，当用户达成学习里程碑时，会弹出精美的 Toast 提示以示鼓励。

*   **现代化桌面体验**:
    *   采用 Qt Widgets 构建，性能卓越，响应迅速。
    *   精心设计的自定义深色主题（AMOLED），并适配 Windows 系统的暗色标题栏，提供统一、沉浸的视觉体验。
    *   提供专业的 [`WordHub.exe`](https://github.com/stibiums/WordHub/releases) 安装包，方便在任何 Windows 电脑上部署。

## 🏛️ 2. 项目模块与类设计

### 2.1 模块结构

```
WordHub_Project_Root/
├── WordHub/                       # Qt C++ 项目源码目录
│   ├── UI/                        # UI 相关文件 (.ui, .cpp, .h, .qrc)
│   ├── back_head/                 # 后端模块头文件
│   ├── back_src/                  # 后端模块源文件
│   ├── API/                       # 外部 API 接口封装
│   ├── guess_according_to_description/ # “看描述猜单词”游戏的 C++ 接口
│   ├── WordHub.pro                # Qt 项目配置文件
│   └── main.cpp                   # 程序入口
├── python_reasoner/               # Python 脚本模块 (供游戏调用)
├── 配置文件/                      # 运行所需的配置文件 (e.g., config.zip)
├── docs/                          # 项目相关文档 (设计、规范等)
└── WordHub_Setup.iss              # Inno Setup 打包脚本
```

### 2.2 主要类设计

| 类名 (Class) | 主要职责 (Responsibilities) |
| :--- | :--- |
| `MainWindow` | 主窗口，作为程序UI的容器，管理各个子界面（学习、查询、用户、成就等）的切换和通信。 |
| `Learner` | 核心业务逻辑类（单例），负责管理当前用户状态、学习进度、成就解锁等，是UI与数据之间的桥梁。 |
| `WordDatabase` | 数据库操作类，封装所有与 SQLite 相关的操作，包括单词、词库、用户、学习记录的增删改查。 |
| `UserWidget` | 用户中心界面，负责展示用户的学习统计数据（热力图、折线图等），并触发学习类成就的检查。 |
| `LearnWidget` | 学习/复习/测试界面的核心，负责单词的展示、用户交互、答案判断和学习记录的生成。 |
| `AchievementWidget`| 成就系统界面，负责从数据库加载并展示所有成就的状态，并响应解锁信号，弹出 Toast 提示。 |
| `guess_word` | “看描述猜单词”游戏的C++接口类，通过 `QProcess` 调用 Python 脚本，并解析返回的 JSON 数据。 |

### 2.3 核心类设计理念

为了实现清晰的权责分离和高内聚低耦合的设计目标，我们将项目划分为**数据模型**、**业务逻辑**和**UI表现**三个层次。以下是各核心类的详细设计理念：

#### 2.3.1 数据模型 (Data Models)

这些类定义在 `utils.h` 中，是整个系统数据结构的基础，负责承载程序运行中的核心数据。

*   **`Word`**: 这是系统中最核心的实体类。它不仅仅是一个字符串，而是一个包含了单词所有属性的聚合体。
    *   **设计理念**: 我们将与一个单词相关的所有信息，如音标 (`QVector<Phonetic>`)、多词性释义 (`QMap<QString, QVector<Definition>>`) 以及学习状态 (`lastReviewed`, `reviewCount`, `difficulty`) 都封装在此类中。这种设计使得单词对象可以在不同模块间自由传递，每个模块都能获取到所需信息，而无需频繁查询数据库。
    *   **关键实现**: `meanings` 采用 `QMap` 结构，键为词性，值为该词性下的所有释义，完美地映射了真实世界词典的结构。

*   **`Phonetic` & `Definition`**: 这两个结构体是 `Word` 类的辅助数据容器。
    *   **设计理念**: 它们将复杂的单词属性进一步拆分，使得 `Word` 类的结构更加清晰。`Phonetic` 存储音标文本和发音URL，`Definition` 则聚合了释义、例句、同反义词，体现了“组合优于继承”的设计原则。

*   **`Category`**: 代表一个“词库”或“单词本”。
    *   **设计理念**: 通过引入 `Category`，我们实现了多词库管理的功能。用户可以自由切换学习范围（如 CET4, GRE），或创建自己的个性化词库，为功能扩展提供了良好的基础。

*   **`LearningRecord`**: 记录用户的每一次学习行为。
    *   **设计理念**: 这是一个事件记录类，用于数据统计和分析。每当用户完成一次单词测试，就会生成一个 `LearningRecord` 对象并存入数据库。它是实现艾宾浩斯遗忘曲线、计算学习正确率和生成热力图的数据来源。

#### 2.3.2 业务逻辑与数据访问 (Business Logic & Data Access)

*   **`Learner` (单例)**: 扮演着“项目大脑”的角色。
    *   **设计理念**: 采用单例模式，确保全局只有一个用户学习状态的管理者。它作为业务逻辑层，隔离了UI层和数据层。UI层不直接与数据库交互，而是向 `Learner` 发出请求（如“解锁成就”），`Learner` 处理完逻辑后再去调用 `WordDatabase`，这使得业务逻辑的修改和维护都集中在一个地方。

*   **`WordDatabase`**: 系统的“数据仓库管理员”。
    *   **设计理念**: 这是一个典型的数据访问对象（DAO）。它将所有 `SQL` 语句和数据库连接细节封装在内部，对上层（`Learner`）提供语义清晰的接口（如 `getWordsToReview()`, `updateWordLearningInfo()`）。这种设计极大地降低了系统的耦合度，如果未来需要将 `SQLite` 更换为 `MySQL`，我们只需要修改这一个类，而上层代码无需任何变动。

#### 2.3.3 界面表现 (UI Presentation)

*   **`MainWindow`**: UI的“舞台监督”。
    *   **设计理念**: 它的核心职责是“容器”和“调度者”。它本身不处理复杂的业务逻辑，而是通过 `QStackedWidget` 管理各个功能界面（`UserWidget`, `LearnWidget` 等）的显示和隐藏。同时，它通过信号槽机制，将不同界面发出的信号连接起来（如将 `UserWidget` 的解锁请求连接到 `AchievementWidget` 的执行槽），扮演了通信枢纽的角色。

*   **`UserWidget`**: 用户的“个人仪表盘”。
    *   **设计理念**: 它的核心是“数据展示”和“事件发起”。它负责从后端获取复杂的学习统计数据，并通过 `QPainter` 等工具将其可视化为图表。同时，它也是学习类成就的“检查与触发中心”，在适当的时机（如界面显示时）调用 `checkLearningAchievements()`，发起成就解锁流程。

## 👥 3. 小组成员分工情况

| 成员 | GitHub | 主要负责模块 | 具体分工 |
| :--- | :--- | :--- | :--- |
| **刘继轩** | [stibiums](https://github.com/stibiums) | **后端核心** | 负责整体项目架构设计；数据库模块（SQLite）、用户系统、学习记录、成就系统的实现；`Learner` 核心业务逻辑的编写。 |
| **郑星浩** | [Staaaaaaaaar](https://github.com/Staaaaaaaaar) | **前端界面** | 负责全部 UI 界面的设计与实现，包括主窗口、学习、查询、用户中心、数据可视化图表、游戏等界面的开发与美化。 |
| **郑嘉祺** | [missswiftie](https://github.com/missswiftie) | **游戏模块以及其他** | 负责字典源文件解析（.mdx通过python脚本转化为.json）；负责 Wordle 和“看描述猜单词”两个游戏的核心逻辑实现，包括 Python 端的 AI 接口调用和 C++ 端的整合；负责用户注册登录界面以及用户界面（包括用户信息、用户登录热力图等）。 |

## 💡 4. 项目总结与反思

### 4.1 项目总结
本项目成功实现了 WordHub 单词学习软件的预定目标。我们构建了一个功能完善、体验流畅的桌面应用程序。通过 Qt 框架，我们实现了高效的前后端分离；通过 SQLite，我们保证了数据的可靠存储和快速访问；通过模块化的设计，我们清晰地划分了学习、游戏、用户、成就等多个核心功能，并保证了它们之间的良好协作。

### 4.2 项目反思
*   **技术收获**: 通过本次项目，我们深入实践了 C++/Qt 的大型项目开发流程，对信号与槽机制、UI设计、数据库交互、多进程通信（C++ 与 Python）等技术有了更深刻的理解。
*   **遇到的挑战**: 在开发初期，模块间的接口定义不够清晰，导致了部分返工。例如，成就解锁的触发时机和数据统计函数的归属问题，经过多次讨论和重构才最终确定。
*   **可改进之处**:
    1.  **多线程优化**: 目前单词导入和网络请求在主线程执行，未来可以将其移至工作线程，避免界面卡顿。
    2.  **代码复用**: 部分UI控件的代码可以进一步封装成自定义Widget，以提高复用性。
    3.  **测试覆盖**: 目前缺少单元测试，未来可以为 `WordDatabase` 和 `Learner` 等核心后端类补充单元测试，以保证代码质量。

---

## 🚀 附：开发者快速上手

1.  **获取源码**:
    ```bash
    # 本项目的源代码公开地址即为本仓库地址
    git clone https://github.com/stibiums/WordHub.git
    ```
2.  **环境配置**: 使用 **Qt Creator** 打开项目根目录下的 `WordHub/WordHub.pro` 文件。请确保使用 **Qt 6.x** 版本和 **MinGW 64-bit** 编译器。
3.  **构建运行**:
    *   直接在 Qt Creator 中构建并运行项目。
    *   **重要**: 首次运行前，请将`配置文件/config.zip`解压到编译生成的可执行文件（`.exe`）所在的目录下。

## 📄 开源许可

本项目采用 [MIT License](LICENSE)
